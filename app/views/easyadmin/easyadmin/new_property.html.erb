<%= render partial: "/easyadmin/easyadmin/left_bar", locals: { page: "property" } %>
    
<div id="content">    

  <div id="content-header">
    <h1>NUOVA PROPERTY</h1>
  </div> <!-- #content-header --> 

  <div id="content-container">

    <div class="row">
      <div class="col-md-12"> 
        <% if @property.errors.any? %>
          <div class="row">
            <div class="col-lg-12">
              <div class="alert alert-danger">
                <p>Errori nel salvataggio della PROPERTY:</p>
                <p>
                  <ul>
                    <% @property.errors.full_messages.each do |msg| %>
                      <li><%= msg %></li>
                    <% end %>
                  </ul>
                </p>
              </div>
            </div>
          </div>
        <% elsif flash[:notice] %>
          <div class="row">
            <div class="col-lg-12">
              <div class="alert alert-success"><%= flash[:notice] %></div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
    
    <%= form_for @property, url: { action: "save_property" }, multipart: true do |f| %>

      <h3>Dati generali</h3>
      <hr/>

      <div class="row">
        <div class="col-lg-6">
          <div class="form-group">
              <label class="text-input">Nome</label>
              <%= f.text_field :name, :class => "form-control" %>
          </div>
          <div class="form-group">
              <label class="text-input">Descrizione</label>
              <%= f.text_area :description, :class => "form-control", rows: 3 %>
          </div>
          <div class="form-group">
              <label class="text-input">Codice colore</label>
              <%= f.text_field :color_code, :class => "form-control" %>
          </div>
          <div class="form-group">
              <label class="text-input">SFONDO</label>
              <div class="fileupload fileupload-new" data-provides="fileupload">
                <div class="fileupload-preview thumbnail" style="width: 100%; height: 250px; line-height: 20px;"></div>
                <div>
                  <span class="btn btn-default btn-file"><span class="fileupload-new">SELEZIONA L'IMMAGINE</span>
                  <span class="fileupload-exists">Change</span><%= f.file_field :background  %></span>
                  <a href="#" class="btn btn-default fileupload-exists" data-dismiss="fileupload">Remove</a>
                </div>
              </div>
          </div>
        </div>
        <div class="col-lg-6">

          <div class="panel panel-default">
            <div class="panel-heading">PUNTEGGI PRECOMPILATI</div>
            <div class="panel-body">
              <div class="row" style="padding-bottom: 0px; margin-bottom: 0px;">
                <div class="col-lg-12">
                  <%= f.fields_for :default_interaction_points do |builder| %>
                    <%= builder.hidden_field :interaction_type, :class => "form-control" %>
                    <% if builder.object.interaction_type == "TRIVIA" %> 
                      <div class="row" style="padding-bottom: 0px; margin-bottom: 0px;">
                        <div class="col-lg-6">
                          <div class="form-group">
                            <label class="text-input">Punti <%= builder.object.interaction_type %></label>
                            <%= builder.text_field :points, :class => "form-control" %>
                          </div>
                        </div>
                        <div class="col-lg-6">
                          <div class="form-group">
                            <label class="text-input">Punti <%= builder.object.interaction_type %> corretto</label>
                            <%= builder.text_field :added_points, :class => "form-control" %>
                          </div>
                        </div>
                      </div>
                    <% else %>
                      <div class="form-group">
                        <label class="text-input">Punti <%= builder.object.interaction_type %></label>
                        <%= builder.text_field :points, :class => "form-control" %>
                      </div>
                    <% end %>
                  <% end %>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>

      <h3>Data di attivazione</h3>
      <hr/>

      <div class="row">
        <div class="col-lg-6">
          <div class="form-group">
            <label class="text-input">Giorno</label>
            <div id="property_activation_date_div" class="input-group date" data-auto-close="true" data-date-autoclose="true" data-date-format="yyyy-mm-dd">
              <%= f.text_field :activation_date, :class => "form-control" %>
              <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
            </div>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="form-group">
            <label class="text-input">Ora</label>
            <div id="dp-ex-3" class="input-group bootstrap-timepicker">
              <%= f.text_field :activation_time, :class => "form-control" %>
              <span class="input-group-addon"><i class="fa fa-clock-o"></i></span>
            </div>
          </div>
        </div>
      </div>

      <div class="row text-center">
        <div class="col-sm12">
          <button type="submit" class="btn btn-primary btn-lg">GENERA</button>
        </div>
      </div>     
    <% end %>
  </div>
</div>