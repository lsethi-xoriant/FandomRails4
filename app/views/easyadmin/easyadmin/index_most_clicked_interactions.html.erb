<%= render partial: "/easyadmin/easyadmin/left_bar", locals: { page: "dashboard" } %>
 
  <div id="content">    
    
    <div id="content-header">
      <h1>INTERAZIONI PIÃ™ CLICCATE</h1>
    </div> <!-- #content-header --> 

    <div id="content-container">

    <% if flash[:notice] %>
      <div class="row">
        <div class="col-md-12">         
          <div class="row">
            <div class="col-lg-12">
              <div class="alert alert-success"><%= flash[:notice] %></div>
            </div>
          </div>
        </div>
      </div>
    <% end %>

    <div class="row">
      <div class="col-md-2">
      <%= form_tag :method => 'post' do %>
        <div class="form-group">
          <label class="text-input">DAL GIORNO</label></br>
          <%= text_field_tag :datepicker_from_date, @from_date_string, :class => "form-control" %>
        </div>
      </div>
      <div class="col-md-2">
        <div class="form-group">
          <label class="text-input">AL GIORNO</label></br>
          <%= text_field_tag :datepicker_to_date, @to_date_string, :class => "form-control" %>
        </div>
      </div>
      <div class="col-md-2">
        <div class="form-group">
          </br><%= submit_tag 'APPLICA FILTRO', class: 'btn btn-primary btn-block' %>
        </div>
      </div>
      <div class="col-md-2">
        <div class="form-group">
          </br><%= submit_tag 'RESET', class: 'btn btn-primary btn-block' %>
        <% end %>
        </div>
      </div>
    </div> <!-- /.row -->

    <div id="cta-to-filter" class="row hidden">
      <div class="col-md-12"> 
        <table id="cta-from-ajax-request" class="table table-striped">
        </table>
      </div>
    </div>

    <div class="row cta-to-show">
      <div class="col-md-12"> 
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Interazione</th>
              <th>Engagement</th>
              <th>CTA</th>
              <th>Immagine CTA</th>
            </tr>
          </thead>            
          
          <% @interactions.each do |interaction| %>
            <tr>
              <td>[<%= interaction.resource_type %>]</td>
              <td><%= interaction.count %></td>
              <td>
                <%= link_to "#{interaction.call_to_action.title} [id: #{interaction.call_to_action.id}]", easyadmin_cta_show_path(interaction.call_to_action.id), class: "btn btn-default btn-xs" %></a>
              </td>
              <td>
                <img src="<%= interaction.call_to_action.thumbnail.url %>" class="img-responsive" style="max-width: 200px; width: 100%;">
              </td>
            </tr>
          <% end %>
        </table>
      </div>
    </div>

    <div class="row cta-to-show">
      <div class="col-md-12">
        <%= render partial: "/easyadmin/easyadmin/pagination" %>
      </div>
    </div>

  </div>
</div>

<script type="text/javascript">
$("#datepicker_from_date").datepicker();
$("#datepicker_to_date").datepicker();
</script>
