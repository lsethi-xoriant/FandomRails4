<!-- PROFILE -->
<div class="modal fade" id="modal-update-user" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Profilo</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-12 text-center">
            <div class="row">
              <div class="col-sm-12">
                <a class="needsclick" ng-click="propagateClickOnFileUploadInput()" style="position: relative; display: inline-block;">
                  <img class="modal-update-user__avatar" ng-if="form_data.r_current_user._avatar[0].dataUrl != null" ng-src="{{form_data.r_current_user._avatar[0].dataUrl}}">
                  <img class="modal-update-user__avatar modal-update-user__avatar--rounded" ng-if="form_data.r_current_user._avatar[0].dataUrl == null" ng-src="{{form_data.r_current_user.avatar}}">
                  <!--<span class="modal-update-user__pencil fa fa-pencil"></span>-->
                </a>
              </div>
              <div class="col-sm-12">
                <button class="btn btn-default btn-xs iw_upload-btn" ng-click="propagateClickOnFileUploadInput()">CARICA FOTO</button>
              </div>
            </div>
            <div class="col-sm-12">
              <div class="form-group hidden">
                <input id="upload-input" name="form_data.r_current_user._avatar" ng-file-select="" ng-model="form_data.r_current_user._avatar" class="form-control" type="file" ng-file-change="generateThumb(form_data.r_current_user._avatar[0])">
              </div>
              <button class="btn btn-green modal-update-user__btn" ng-click="updateUserWithAvatar()">AGGIORNA</button>
            </div>
          </div>
          <div class="col-sm-9">
            <div ng-if="form_data.r_current_user.errors" class="iw-errors">
              <p>Errori nella compilazione:</p>
              <ul>
                <li ng-repeat="error in form_data.r_current_user.errors">{{error}}</li>
              </ul>
            </div>

            <%#
            <div class="form-group">
              <input name="first_name" ng-model="form_data.r_current_user.first_name" class="form-control" placeholder="Nome" ng-readonly="current_user.first_name"></input>
            </div>
            <div class="form-group">
              <input name="last_name" ng-model="form_data.r_current_user.last_name" class="form-control" placeholder="Cognome"ng-readonly="current_user.last_name"></input>
            </div>
            %>
          </div>    
        </div>
      </div>
    </div>
  </div>
</div>

<!-- SIGN IN IN COMMUNITY -->
<div class="modal fade" id="modal-update-user-pt2" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Profilo aggiornato</h4>
      </div>
      <div class="modal-body">
        <p>Il tuo profilo è stato aggiornato correttamente.</p>
      </div>
    </div>
  </div>
</div>

<!-- WELCOME -->
<%= render partial: "/application/iw_registration", locals: { iw_id: "registration-modal" } %>

<%#
<div class="modal fade" id="registration-modal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Benvenuto</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-5 col-sm-offset-1">
            <img style="width: 100%;" ng-src="{{aux.assets.extra_fields.welcome_img_1.url}}">
          </div>
          <div class="col-sm-5">
            <img style="width: 100%;" ng-src="{{aux.assets.extra_fields.welcome_img_2.url}}">
          </div>
          <div class="col-sm-10 col-sm-offset-1 text-center">
            <p class="modal-welcome__description">Vincere un Minipimer è semplice, misura il tuo livello di benessere rispondendo alle domande dei test. Guadagnerai un biglietto instant win per ogni test fatto che ti permetterà di scoprire se sarai tra i
            fortunati vincitori.</p>
            <button type="button" class="btn btn-green modal-welcome__btn" data-dismiss="modal" aria-label="Close">INIZIA E FAI IL TEST</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
%>

<%= render partial: "/instantwin/instant_win_modal" %>