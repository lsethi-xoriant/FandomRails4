<div class="profile-container">
  <div class="container">

    <div class="row profile-container__row">
      <div class="col-sm-3 profile-container__user">    
        <div class="percentage_circle percentage_circle_profile p{{getUserBadgesPercent()}}">
          <div class="percentage_circle_fix_bar"></div>
          <span class="percentage_circle_value percentage_circle_value_profile">
              <img ng-src="{{current_user.avatar}}">
          </span>
          <div class="percentage_circle_slice">
            <div class="percentage_circle_bar"></div>
            <div class="percentage_circle_fill"></div>
          </div>
        </div>
        <p style="margin-top: 52px; font-weight: bold;">Ciao {{current_user.first_name}}</p>
        <p>Ecco i tuoi risultati:</p>
      </div>

      <div class="col-sm-2 profile-container__badge text-center" ng-repeat="badge in aux.badges | limitTo:3">
        <div class="profile-container__badge-block">
          <div class="percentage_circle small p{{getBadgeCost(badge)}}">
            <div class="percentage_circle_fix_bar"></div>
            <span class="percentage_circle_value">
                <img ng-src="{{badge.image}}">
            </span>
            <div class="percentage_circle_slice">
              <div class="percentage_circle_bar" ng-style="{'border-color': badge.extra_fields.color }"></div>
              <div class="percentage_circle_fill" ng-style="{'border-color': badge.extra_fields.color }"></div>
            </div>
          </div>
          <p class="profile-container__badge-text" ng-class="{'inactive': badge.inactive }">{{badge.title}}</p>
          <p class="profile-container__badge-text" ng-class="{'inactive': badge.inactive }">{{badge.description}}</p>
        </div>
      </div>

      <div class="col-sm-3 text-center profile-container__iw">
        <p class="profile-container__iw-text">Hai
          <span class="label cta_cover-credits_label_yellow">
            +{{current_user.main_reward_counter}} <span class="fa fa-ticket"></span>
          </span> 
          biglietti
        </p> 
        <div ng-if="aux.instant_win_info.interaction_id" class="profile-container__iw-btn__container">
          <div ng-if="current_user.registration_fully_completed">
            <button type="button" class="btn btn-green btn-lg" ng-click="openInstantWinModal()">
              SCOPRI SE HAI VINTO
            </button>
          </div>
          <div ng-if="!current_user.registration_fully_completed">
            <button type="button" class="btn btn-green btn-lg" ng-click="openRegistrationModalForInstantWin(<%= user_for_registation_form().to_json %>)">
              SCOPRI SE HAI VINTO
            </button>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<%= render partial: "/call_to_action/tests" %>

<div class="container">
  <div class="row">
    <div class="col-sm-12">
      <p>Le regole del benessere</p>
    </div>
  </div>
  <div class="row" ng-repeat="calltoaction_info in aux.tips.tip_info_list">
    <div class="col-sm-12">
      
      <div class="cta_tip-container">

      <div class="row">
        <div class="col-sm-6 cta_tip-section_1_container" ng-bind-html="calltoaction_info.calltoaction.extra_fields.section_1 | unsafe"></div>
        <div class="col-sm-6 text-right cta_tip-img_container hidden-xs">
          <img class="cta_tip-img" ng-src="{{calltoaction_info.calltoaction.extra_fields.img_1.url}}">
        </div>
      </div>

      <div class="row">
        <div class="col-sm-4">
          <img class="cta_tip-img" ng-src="{{calltoaction_info.calltoaction.extra_fields.img_2.url}}">
        </div>
        <div class="col-sm-8 cta_tip-section_2_container" ng-bind-html="calltoaction_info.calltoaction.extra_fields.section_2 | unsafe"></div>
      </div>
         
      <div class="row" ng-repeat="interaction_info in calltoaction_info.calltoaction.interaction_info_list | filter:filterShareInteractions">
        <div class="col-sm-12 text-right">
          <%= render partial: "/call_to_action/share_interaction" %>
        </div>
      </div>

      </div>



    </div>
  </div>
  <div class="row" ng-if="aux.tips.has_more">
    <div class="col-sm-12 text-center">
      <button class="btn btn-success" ng-class="{'disabled': append_tips_in_progress}" ng-click="appendTips()">CARICA ALTRI</button>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-sm-12">
      <p>Prodotti</p>
    </div>
  </div>
  <div class="row" ng-repeat="calltoaction_info_list in aux.products.product_info_list | groupBy:2">
    <div class="col-sm-6" ng-repeat="calltoaction_info in calltoaction_info_list">
      <div class="product-container">
        <img class="product-img" ng-src="{{calltoaction_info.calltoaction.thumbnail_url}}">
        <p class="product-title">{{calltoaction_info.calltoaction.title}}</p>
        <p class="product-description">{{calltoaction_info.calltoaction.description}}</p>
        <a class="btn btn-green btn-lg product-btn" target="_blank" href="{{calltoaction_info.calltoaction.extra_fields.url}}">SCOPRI</a>
      </div>
    </div>
  </div>
</div>
